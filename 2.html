<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конструктор Атома</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="number"] {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .output {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .output p {
            margin: 10px 0;
        }
        #atomCanvas {
            display: block;
            margin: 20px auto;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>Конструктор Атома</h1>
    
    <div class="input-group">
        <label for="protons">Количество протонов (1-118):</label>
        <input type="number" id="protons" min="1" max="118" value="1">
    </div>
    
    <div class="input-group">
        <label for="neutrons">Количество нейтронов (0 или больше):</label>
        <input type="number" id="neutrons" min="0" value="0">
    </div>
    
    <div class="input-group">
        <label for="electrons">Количество электронов (0 или больше):</label>
        <input type="number" id="electrons" min="0" value="1">
    </div>
    
    <canvas id="atomCanvas" width="400" height="400"></canvas>
    
    <div class="output">
        <p><strong>Элемент:</strong> <span id="element">Водород (H)</span></p>
        <p><strong>Атомная масса:</strong> <span id="mass">1</span></p>
        <p><strong>Заряд:</strong> <span id="charge">0</span></p>
        <p><strong>Электронная конфигурация:</strong> <span id="config">1s^1</span></p>
        <p><strong>Ядерная стабильность:</strong> <span id="nuclearStable">Да</span></p>
        <p><strong>Стабильные изотопы:</strong> <span id="stableIsotopes"></span></p>
    </div>

    <script>
        const elements = [
            { atomicNumber: 1, symbol: 'H', name: 'Водород' },
            { atomicNumber: 2, symbol: 'He', name: 'Гелий' },
            { atomicNumber: 3, symbol: 'Li', name: 'Литий' },
            { atomicNumber: 4, symbol: 'Be', name: 'Бериллий' },
            { atomicNumber: 5, symbol: 'B', name: 'Бор' },
            { atomicNumber: 6, symbol: 'C', name: 'Углерод' },
            { atomicNumber: 7, symbol: 'N', name: 'Азот' },
            { atomicNumber: 8, symbol: 'O', name: 'Кислород' },
            { atomicNumber: 9, symbol: 'F', name: 'Фтор' },
            { atomicNumber: 10, symbol: 'Ne', name: 'Неон' },
            { atomicNumber: 11, symbol: 'Na', name: 'Натрий' },
            { atomicNumber: 12, symbol: 'Mg', name: 'Магний' },
            { atomicNumber: 13, symbol: 'Al', name: 'Алюминий' },
            { atomicNumber: 14, symbol: 'Si', name: 'Кремний' },
            { atomicNumber: 15, symbol: 'P', name: 'Фосфор' },
            { atomicNumber: 16, symbol: 'S', name: 'Сера' },
            { atomicNumber: 17, symbol: 'Cl', name: 'Хлор' },
            { atomicNumber: 18, symbol: 'Ar', name: 'Аргон' },
            { atomicNumber: 19, symbol: 'K', name: 'Калий' },
            { atomicNumber: 20, symbol: 'Ca', name: 'Кальций' },
            { atomicNumber: 21, symbol: 'Sc', name: 'Скандий' },
            { atomicNumber: 22, symbol: 'Ti', name: 'Титан' },
            { atomicNumber: 23, symbol: 'V', name: 'Ванадий' },
            { atomicNumber: 24, symbol: 'Cr', name: 'Хром' },
            { atomicNumber: 25, symbol: 'Mn', name: 'Марганец' },
            { atomicNumber: 26, symbol: 'Fe', name: 'Железо' },
            { atomicNumber: 27, symbol: 'Co', name: 'Кобальт' },
            { atomicNumber: 28, symbol: 'Ni', name: 'Никель' },
            { atomicNumber: 29, symbol: 'Cu', name: 'Медь' },
            { atomicNumber: 30, symbol: 'Zn', name: 'Цинк' },
            { atomicNumber: 31, symbol: 'Ga', name: 'Галлий' },
            { atomicNumber: 32, symbol: 'Ge', name: 'Германий' },
            { atomicNumber: 33, symbol: 'As', name: 'Мышьяк' },
            { atomicNumber: 34, symbol: 'Se', name: 'Селен' },
            { atomicNumber: 35, symbol: 'Br', name: 'Бром' },
            { atomicNumber: 36, symbol: 'Kr', name: 'Криптон' },
            { atomicNumber: 37, symbol: 'Rb', name: 'Рубидий' },
            { atomicNumber: 38, symbol: 'Sr', name: 'Стронтций' },
            { atomicNumber: 39, symbol: 'Y', name: 'Иттрий' },
            { atomicNumber: 40, symbol: 'Zr', name: 'Цирконий' },
            { atomicNumber: 41, symbol: 'Nb', name: 'Ниобий' },
            { atomicNumber: 42, symbol: 'Mo', name: 'Молибден' },
            { atomicNumber: 43, symbol: 'Tc', name: 'Технеций' },
            { atomicNumber: 44, symbol: 'Ru', name: 'Рутений' },
            { atomicNumber: 45, symbol: 'Rh', name: 'Родий' },
            { atomicNumber: 46, symbol: 'Pd', name: 'Палладий' },
            { atomicNumber: 47, symbol: 'Ag', name: 'Серебро' },
            { atomicNumber: 48, symbol: 'Cd', name: 'Кадмий' },
            { atomicNumber: 49, symbol: 'In', name: 'Индий' },
            { atomicNumber: 50, symbol: 'Sn', name: 'Олово' },
            { atomicNumber: 51, symbol: 'Sb', name: 'Сурьма' },
            { atomicNumber: 52, symbol: 'Te', name: 'Теллур' },
            { atomicNumber: 53, symbol: 'I', name: 'Иод' },
            { atomicNumber: 54, symbol: 'Xe', name: 'Ксенон' },
            { atomicNumber: 55, symbol: 'Cs', name: 'Цезий' },
            { atomicNumber: 56, symbol: 'Ba', name: 'Барий' },
            { atomicNumber: 57, symbol: 'La', name: 'Лантан' },
            { atomicNumber: 58, symbol: 'Ce', name: 'Церий' },
            { atomicNumber: 59, symbol: 'Pr', name: 'Празеодим' },
            { atomicNumber: 60, symbol: 'Nd', name: 'Неодим' },
            { atomicNumber: 61, symbol: 'Pm', name: 'Прометий' },
            { atomicNumber: 62, symbol: 'Sm', name: 'Самарий' },
            { atomicNumber: 63, symbol: 'Eu', name: 'Европий' },
            { atomicNumber: 64, symbol: 'Gd', name: 'Гадолиний' },
            { atomicNumber: 65, symbol: 'Tb', name: 'Тербий' },
            { atomicNumber: 66, symbol: 'Dy', name: 'Диспрозий' },
            { atomicNumber: 67, symbol: 'Ho', name: 'Гольмий' },
            { atomicNumber: 68, symbol: 'Er', name: 'Эрбий' },
            { atomicNumber: 69, symbol: 'Tm', name: 'Тулий' },
            { atomicNumber: 70, symbol: 'Yb', name: 'Иттербий' },
            { atomicNumber: 71, symbol: 'Lu', name: 'Лютеций' },
            { atomicNumber: 72, symbol: 'Hf', name: 'Гафний' },
            { atomicNumber: 73, symbol: 'Ta', name: 'Тантал' },
            { atomicNumber: 74, symbol: 'W', name: 'Вольфрам' },
            { atomicNumber: 75, symbol: 'Re', name: 'Рений' },
            { atomicNumber: 76, symbol: 'Os', name: 'Осмий' },
            { atomicNumber: 77, symbol: 'Ir', name: 'Иридий' },
            { atomicNumber: 78, symbol: 'Pt', name: 'Платина' },
            { atomicNumber: 79, symbol: 'Au', name: 'Золото' },
            { atomicNumber: 80, symbol: 'Hg', name: 'Ртуть' },
            { atomicNumber: 81, symbol: 'Tl', name: 'Таллий' },
            { atomicNumber: 82, symbol: 'Pb', name: 'Свинец' },
            { atomicNumber: 83, symbol: 'Bi', name: 'Висмут' },
            { atomicNumber: 84, symbol: 'Po', name: 'Полний' },
            { atomicNumber: 85, symbol: 'At', name: 'Астат' },
            { atomicNumber: 86, symbol: 'Rn', name: 'Радон' },
            { atomicNumber: 87, symbol: 'Fr', name: 'Франций' },
            { atomicNumber: 88, symbol: 'Ra', name: 'Радий' },
            { atomicNumber: 89, symbol: 'Ac', name: 'Актий' },
            { atomicNumber: 90, symbol: 'Th', name: 'Торий' },
            { atomicNumber: 91, symbol: 'Pa', name: 'Протактиний' },
            { atomicNumber: 92, symbol: 'U', name: 'Уран' },
            { atomicNumber: 93, symbol: 'Np', name: 'Нептуний' },
            { atomicNumber: 94, symbol: 'Pu', name: 'Плутоний' },
            { atomicNumber: 95, symbol: 'Am', name: 'Америций' },
            { atomicNumber: 96, symbol: 'Cm', name: 'Кюрий' },
            { atomicNumber: 97, symbol: 'Bk', name: 'Берклий' },
            { atomicNumber: 98, symbol: 'Cf', name: 'Калифорний' },
            { atomicNumber: 99, symbol: 'Es', name: 'Эйнштейний' },
            { atomicNumber: 100, symbol: 'Fm', name: 'Фермий' },
            { atomicNumber: 101, symbol: 'Md', name: 'Менделевий' },
            { atomicNumber: 102, symbol: 'No', name: 'Нобелий' },
            { atomicNumber: 103, symbol: 'Lr', name: 'Лоуренсий' },
            { atomicNumber: 104, symbol: 'Rf', name: 'Резерфордий' },
            { atomicNumber: 105, symbol: 'Db', name: 'Дубний' },
            { atomicNumber: 106, symbol: 'Sg', name: 'Сиборгий' },
            { atomicNumber: 107, symbol: 'Bh', name: 'Борий' },
            { atomicNumber: 108, symbol: 'Hs', name: 'Хассий' },
            { atomicNumber: 109, symbol: 'Mt', name: 'Мейтнерий' },
            { atomicNumber: 110, symbol: 'Ds', name: 'Дармштадтий' },
            { atomicNumber: 111, symbol: 'Rg', name: 'Рентгений' },
            { atomicNumber: 112, symbol: 'Cn', name: 'Коперниций' },
            { atomicNumber: 113, symbol: 'Nh', name: 'Нихоний' },
            { atomicNumber: 114, symbol: 'Fl', name: 'Флеровий' },
            { atomicNumber: 115, symbol: 'Mc', name: 'Московий' },
            { atomicNumber: 116, symbol: 'Lv', name: 'Ливерморий' },
            { atomicNumber: 117, symbol: 'Ts', name: 'Теннессин' },
            { atomicNumber: 118, symbol: 'Og', name: 'Оганесон' }
        ];

        const stableIsotopes = {
            1: [{mass:1, abundance:99.9885}, {mass:2, abundance:0.0115}],
            2: [{mass:3, abundance:0.000134}, {mass:4, abundance:99.999866}],
            3: [{mass:6, abundance:7.59}, {mass:7, abundance:92.41}],
            4: [{mass:9, abundance:100}],
            5: [{mass:10, abundance:19.9}, {mass:11, abundance:80.1}],
            6: [{mass:12, abundance:98.93}, {mass:13, abundance:1.07}],
            7: [{mass:14, abundance:99.636}, {mass:15, abundance:0.364}],
            8: [{mass:16, abundance:99.757}, {mass:17, abundance:0.038}, {mass:18, abundance:0.205}],
            9: [{mass:19, abundance:100}],
            10: [{mass:20, abundance:90.48}, {mass:21, abundance:0.27}, {mass:22, abundance:9.25}],
            11: [{mass:23, abundance:100}],
            12: [{mass:24, abundance:78.99}, {mass:25, abundance:10.00}, {mass:26, abundance:11.01}],
            13: [{mass:27, abundance:100}],
            14: [{mass:28, abundance:92.223}, {mass:29, abundance:4.685}, {mass:30, abundance:3.092}],
            15: [{mass:31, abundance:100}],
            16: [{mass:32, abundance:94.99}, {mass:33, abundance:0.75}, {mass:34, abundance:4.25}, {mass:36, abundance:0.01}],
            17: [{mass:35, abundance:75.76}, {mass:37, abundance:24.24}],
            18: [{mass:36, abundance:0.3336}, {mass:38, abundance:0.0629}, {mass:40, abundance:99.6035}],
            19: [{mass:39, abundance:93.2581}, {mass:40, abundance:0.0117}, {mass:41, abundance:6.7302}],
            20: [{mass:40, abundance:96.941}, {mass:42, abundance:0.647}, {mass:43, abundance:0.135}, {mass:44, abundance:2.086}, {mass:46, abundance:0.004}, {mass:48, abundance:0.187}],
            21: [{mass:45, abundance:100}],
            22: [{mass:46, abundance:8.25}, {mass:47, abundance:7.44}, {mass:48, abundance:73.72}, {mass:49, abundance:5.41}, {mass:50, abundance:5.18}],
            23: [{mass:50, abundance:0.25}, {mass:51, abundance:99.75}],
            24: [{mass:50, abundance:4.345}, {mass:52, abundance:83.789}, {mass:53, abundance:9.501}, {mass:54, abundance:2.365}],
            25: [{mass:55, abundance:100}],
            26: [{mass:54, abundance:5.845}, {mass:56, abundance:91.754}, {mass:57, abundance:2.119}, {mass:58, abundance:0.282}],
            27: [{mass:59, abundance:100}],
            28: [{mass:58, abundance:68.077}, {mass:60, abundance:26.223}, {mass:61, abundance:1.1399}, {mass:62, abundance:3.6346}, {mass:64, abundance:0.9255}],
            29: [{mass:63, abundance:69.15}, {mass:65, abundance:30.85}],
            30: [{mass:64, abundance:49.17}, {mass:66, abundance:27.73}, {mass:67, abundance:4.04}, {mass:68, abundance:18.45}, {mass:70, abundance:0.61}],
            31: [{mass:69, abundance:60.108}, {mass:71, abundance:39.892}],
            32: [{mass:70, abundance:20.57}, {mass:72, abundance:27.45}, {mass:73, abundance:7.75}, {mass:74, abundance:36.5}, {mass:76, abundance:7.73}],
            33: [{mass:75, abundance:100}],
            34: [{mass:74, abundance:0.89}, {mass:76, abundance:9.37}, {mass:77, abundance:7.63}, {mass:78, abundance:23.77}, {mass:80, abundance:49.61}, {mass:82, abundance:8.73}],
            35: [{mass:79, abundance:50.69}, {mass:81, abundance:49.31}],
            36: [{mass:78, abundance:0.355}, {mass:80, abundance:2.286}, {mass:82, abundance:11.593}, {mass:83, abundance:11.5}, {mass:84, abundance:56.987}, {mass:86, abundance:17.279}],
            37: [{mass:85, abundance:72.17}, {mass:87, abundance:27.83}],
            38: [{mass:84, abundance:0.56}, {mass:86, abundance:9.86}, {mass:87, abundance:7.0}, {mass:88, abundance:82.58}],
            39: [{mass:89, abundance:100}],
            40: [{mass:90, abundance:51.45}, {mass:91, abundance:11.22}, {mass:92, abundance:17.15}, {mass:94, abundance:17.38}, {mass:96, abundance:2.8}],
            41: [{mass:93, abundance:100}],
            42: [{mass:92, abundance:14.53}, {mass:94, abundance:9.15}, {mass:95, abundance:15.84}, {mass:96, abundance:16.67}, {mass:97, abundance:9.6}, {mass:98, abundance:24.39}, {mass:100, abundance:9.82}],
            43: [],
            44: [{mass:96, abundance:5.54}, {mass:98, abundance:1.87}, {mass:99, abundance:12.76}, {mass:100, abundance:12.6}, {mass:101, abundance:17.06}, {mass:102, abundance:31.55}, {mass:104, abundance:18.62}],
            45: [{mass:103, abundance:100}],
            46: [{mass:102, abundance:1.02}, {mass:104, abundance:11.14}, {mass:105, abundance:22.33}, {mass:106, abundance:27.33}, {mass:108, abundance:26.46}, {mass:110, abundance:11.72}],
            47: [{mass:107, abundance:51.839}, {mass:109, abundance:48.161}],
            48: [{mass:106, abundance:1.25}, {mass:108, abundance:0.89}, {mass:110, abundance:12.49}, {mass:111, abundance:12.8}, {mass:112, abundance:24.13}, {mass:113, abundance:12.22}, {mass:114, abundance:28.73}, {mass:116, abundance:7.49}],
            49: [{mass:113, abundance:4.29}, {mass:115, abundance:95.71}],
            50: [{mass:112, abundance:0.97}, {mass:114, abundance:0.66}, {mass:115, abundance:0.34}, {mass:116, abundance:14.54}, {mass:117, abundance:7.68}, {mass:118, abundance:24.22}, {mass:119, abundance:8.59}, {mass:120, abundance:32.58}, {mass:122, abundance:4.63}, {mass:124, abundance:5.79}],
            51: [{mass:121, abundance:57.21}, {mass:123, abundance:42.79}],
            52: [{mass:120, abundance:0.09}, {mass:122, abundance:2.55}, {mass:123, abundance:0.89}, {mass:124, abundance:4.74}, {mass:125, abundance:7.07}, {mass:126, abundance:18.84}, {mass:128, abundance:31.74}, {mass:130, abundance:34.08}],
            53: [{mass:127, abundance:100}],
            54: [{mass:124, abundance:0.0952}, {mass:126, abundance:0.089}, {mass:128, abundance:1.9102}, {mass:129, abundance:26.4006}, {mass:130, abundance:4.071}, {mass:131, abundance:21.2324}, {mass:132, abundance:26.9086}, {mass:134, abundance:10.4357}, {mass:136, abundance:8.8573}],
            55: [{mass:133, abundance:100}],
            56: [{mass:130, abundance:0.106}, {mass:132, abundance:0.101}, {mass:134, abundance:2.417}, {mass:135, abundance:6.592}, {mass:136, abundance:7.854}, {mass:137, abundance:11.232}, {mass:138, abundance:71.698}],
            57: [{mass:138, abundance:0.088881}, {mass:139, abundance:99.91119}],
            58: [{mass:136, abundance:0.185}, {mass:138, abundance:0.251}, {mass:140, abundance:88.45}, {mass:142, abundance:11.114}],
            59: [{mass:141, abundance:100}],
            60: [{mass:142, abundance:27.152}, {mass:143, abundance:12.174}, {mass:144, abundance:23.798}, {mass:145, abundance:8.293}, {mass:146, abundance:17.189}, {mass:148, abundance:5.756}, {mass:150, abundance:5.638}],
            61: [],
            62: [{mass:144, abundance:3.07}, {mass:147, abundance:14.99}, {mass:148, abundance:11.24}, {mass:149, abundance:13.82}, {mass:150, abundance:7.38}, {mass:152, abundance:26.75}, {mass:154, abundance:22.75}],
            63: [{mass:151, abundance:47.81}, {mass:153, abundance:52.19}],
            64: [{mass:152, abundance:0.2}, {mass:154, abundance:2.18}, {mass:155, abundance:14.8}, {mass:156, abundance:20.47}, {mass:157, abundance:15.65}, {mass:158, abundance:24.84}, {mass:160, abundance:21.86}],
            65: [{mass:159, abundance:100}],
            66: [{mass:156, abundance:0.056}, {mass:158, abundance:0.095}, {mass:160, abundance:2.329}, {mass:161, abundance:18.889}, {mass:162, abundance:25.475}, {mass:163, abundance:24.896}, {mass:164, abundance:28.26}],
            67: [{mass:165, abundance:100}],
            68: [{mass:162, abundance:0.139}, {mass:164, abundance:1.601}, {mass:166, abundance:33.503}, {mass:167, abundance:22.869}, {mass:168, abundance:26.978}, {mass:170, abundance:14.91}],
            69: [{mass:169, abundance:100}],
            70: [{mass:168, abundance:0.123}, {mass:170, abundance:2.982}, {mass:171, abundance:14.09}, {mass:172, abundance:21.68}, {mass:173, abundance:16.103}, {mass:174, abundance:32.026}, {mass:176, abundance:12.996}],
            71: [{mass:175, abundance:97.401}, {mass:176, abundance:2.599}],
            72: [{mass:174, abundance:0.16}, {mass:176, abundance:5.26}, {mass:177, abundance:18.6}, {mass:178, abundance:27.28}, {mass:179, abundance:13.62}, {mass:180, abundance:35.08}],
            73: [{mass:180, abundance:0.01201}, {mass:181, abundance:99.98799}],
            74: [{mass:180, abundance:0.12}, {mass:182, abundance:26.5}, {mass:183, abundance:14.31}, {mass:184, abundance:30.64}, {mass:186, abundance:28.43}],
            75: [{mass:185, abundance:37.4}, {mass:187, abundance:62.6}],
            76: [{mass:184, abundance:0.02}, {mass:186, abundance:1.59}, {mass:187, abundance:1.96}, {mass:188, abundance:13.24}, {mass:189, abundance:16.15}, {mass:190, abundance:26.26}, {mass:192, abundance:40.78}],
            77: [{mass:191, abundance:37.3}, {mass:193, abundance:62.7}],
            78: [{mass:190, abundance:0.012}, {mass:192, abundance:0.782}, {mass:194, abundance:32.86}, {mass:195, abundance:33.78}, {mass:196, abundance:25.21}, {mass:198, abundance:7.356}],
            79: [{mass:197, abundance:100}],
            80: [{mass:196, abundance:0.15}, {mass:198, abundance:9.97}, {mass:199, abundance:16.87}, {mass:200, abundance:23.1}, {mass:201, abundance:13.18}, {mass:202, abundance:29.86}, {mass:204, abundance:6.87}],
            81: [{mass:203, abundance:29.52}, {mass:205, abundance:70.48}],
            82: [{mass:204, abundance:1.4}, {mass:206, abundance:24.1}, {mass:207, abundance:22.1}, {mass:208, abundance:52.4}],
            83: [{mass:209, abundance:100}],
            84: [],
            85: [],
            86: [],
            87: [],
            88: [],
            89: [],
            90: [],
            91: [],
            92: [],
            93: [],
            94: [],
            95: [],
            96: [],
            97: [],
            98: [],
            99: [],
            100: [],
            101: [],
            102: [],
            103: [],
            104: [],
            105: [],
            106: [],
            107: [],
            108: [],
            109: [],
            110: [],
            111: [],
            112: [],
            113: [],
            114: [],
            115: [],
            116: [],
            117: [],
            118: []
        };

        const orbitals = [
            {name: '1s', capacity: 2},
            {name: '2s', capacity: 2},
            {name: '2p', capacity: 6},
            {name: '3s', capacity: 2},
            {name: '3p', capacity: 6},
            {name: '4s', capacity: 2},
            {name: '3d', capacity: 10},
            {name: '4p', capacity: 6},
            {name: '5s', capacity: 2},
            {name: '4d', capacity: 10},
            {name: '5p', capacity: 6},
            {name: '6s', capacity: 2},
            {name: '4f', capacity: 14},
            {name: '5d', capacity: 10},
            {name: '6p', capacity: 6},
            {name: '7s', capacity: 2},
            {name: '5f', capacity: 14},
            {name: '6d', capacity: 10},
            {name: '7p', capacity: 6}
        ];

        const protonsInput = document.getElementById('protons');
        const neutronsInput = document.getElementById('neutrons');
        const electronsInput = document.getElementById('electrons');
        const elementOutput = document.getElementById('element');
        const massOutput = document.getElementById('mass');
        const chargeOutput = document.getElementById('charge');
        const configOutput = document.getElementById('config');
        const nuclearStableOutput = document.getElementById('nuclearStable');
        const stableIsotopesOutput = document.getElementById('stableIsotopes');
        const canvas = document.getElementById('atomCanvas');
        const ctx = canvas.getContext('2d');

        let globalProtons = 1;
        let globalNeutrons = 0;
        let globalElectrons = 1;
        let globalShells = [];
        let globalCharge = 0;

        function getShells(electrons) {
            let shells = [];
            let caps = [2, 8, 8, 18, 18, 32, 32]; // Упрощенные емкости оболочек для модели Бора
            let remaining = electrons;
            for (let cap of caps) {
                if (remaining <= 0) break;
                let num = Math.min(remaining, cap);
                shells.push(num);
                remaining -= num;
            }
            if (remaining > 0) shells.push(remaining);
            return shells;
        }

        function getConfig(electrons) {
            let config = [];
            let remaining = electrons;
            for (let orbital of orbitals) {
                if (remaining <= 0) break;
                let num = Math.min(remaining, orbital.capacity);
                config.push(`${orbital.name}^${num}`);
                remaining -= num;
            }
            if (remaining > 0) config.push(`[extra]^${remaining}`);
            return config.join(' ');
        }

        function getExpectedN(protons) {
            if (protons === 0) return 0;
            let a = 2 * protons;
            for (let i = 0; i < 10; i++) {
                a = 2 * protons + 0.015 * protons * Math.pow(a, 2 / 3);
            }
            return Math.round(a - protons);
        }

        function isNuclearStable(protons, neutrons) {
            if (protons > 82 || protons === 43 || protons === 61) return false;
            let expected = getExpectedN(protons);
            let delta = Math.floor(protons / 10) + 1;
            return Math.abs(neutrons - expected) <= delta;
        }

        function updateAtom() {
            let protons = parseInt(protonsInput.value) || 0;
            let neutrons = parseInt(neutronsInput.value) || 0;
            let electrons = parseInt(electronsInput.value) || 0;

            if (protons < 1) protons = 1;
            if (protons > 118) protons = 118;
            protonsInput.value = protons;

            if (neutrons < 0) neutrons = 0;
            neutronsInput.value = neutrons;

            if (electrons < 0) electrons = 0;
            electronsInput.value = electrons;

            const element = elements.find(el => el.atomicNumber === protons) || { name: 'Неизвестный', symbol: '?' };
            elementOutput.textContent = `${element.name} (${element.symbol})`;

            const mass = protons + neutrons;
            massOutput.textContent = mass;

            const charge = protons - electrons;
            let chargeDisplay = charge === 0 ? '0' : (charge > 0 ? `+${charge}` : charge);
            chargeOutput.textContent = chargeDisplay;

            configOutput.textContent = getConfig(electrons);

            const nuclearStable = isNuclearStable(protons, neutrons) ? 'Да' : 'Нет';
            nuclearStableOutput.textContent = nuclearStable;

            const stableIso = stableIsotopes[protons] || [];
            const isoString = stableIso.length > 0 ? stableIso.map(i => `${element.symbol}-${i.mass} (${i.abundance}%)`).join(', ') : 'Нет стабильных изотопов';
            stableIsotopesOutput.textContent = isoString;

            globalProtons = protons;
            globalNeutrons = neutrons;
            globalElectrons = electrons;
            globalShells = getShells(electrons);
            globalCharge = charge;
        }

        function drawAtom() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Ядро
            ctx.beginPath();
            ctx.arc(200, 200, 20, 0, 2 * Math.PI);
            ctx.fillStyle = 'red';
            ctx.fill();

            ctx.font = '10px Arial';
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.fillText(`${globalProtons}п`, 200, 198);
            ctx.fillText(`${globalNeutrons}н`, 200, 210);

            // Оболочки
            let radius = 30;
            const time = Date.now() / 1000; // Для скорости анимации

            globalShells.forEach((numElectrons, shellIndex) => {
                radius += 30;

                // Орбита
                ctx.beginPath();
                ctx.arc(200, 200, radius, 0, 2 * Math.PI);
                ctx.strokeStyle = 'gray';
                ctx.stroke();

                // Электроны
                for (let i = 0; i < numElectrons; i++) {
                    const angle = (i / numElectrons) * 2 * Math.PI + time * (shellIndex + 1) * 0.5; // Разные скорости
                    const x = 200 + radius * Math.cos(angle);
                    const y = 200 + radius * Math.sin(angle);

                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, 2 * Math.PI);
                    ctx.fillStyle = 'blue';
                    ctx.fill();
                }
            });
        }

        function animate() {
            drawAtom();
            requestAnimationFrame(animate);
        }

        // Инициализация и запуск анимации
        updateAtom();
        animate();

        // Слушатели событий
        protonsInput.addEventListener('input', updateAtom);
        neutronsInput.addEventListener('input', updateAtom);
        electronsInput.addEventListener('input', updateAtom);
    </script>
</body>
</html>